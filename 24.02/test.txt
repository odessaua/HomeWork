2375 
2376     /**
2377      * Constructor.
2378      * @param CActiveRecord $model the model instance
2379      * @throws CDbException if specified table for active record class cannot be found in the database
2380      */
2381     public function __construct($model)
2382     {
2383         $this->_modelClassName=get_class($model);
2384 
2385         $tableName=$model->tableName();
2386         if(($table=$model->getDbConnection()->getSchema()->getTable($tableName))===null)
2387             throw new CDbException(Yii::t('yii','The table "{table}" for active record class "{class}" cannot be found in the database.',
2388                 array('{class}'=>$this->_modelClassName,'{table}'=>$tableName)));
2389                 
2390         if(($modelPk=$model->primaryKey())!==null || $table->primaryKey===null)
2391         {
2392             $table->primaryKey=$modelPk;
2393             if(is_string($table->primaryKey) && isset($table->columns[$table->primaryKey]))
2394                 $table->columns[$table->primaryKey]->isPrimaryKey=true;
2395             elseif(is_array($table->primaryKey))
2396             {
2397                 foreach($table->primaryKey as $name)
2398                 {
2399                     if(isset($table->columns[$name]))